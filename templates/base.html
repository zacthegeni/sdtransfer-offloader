<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}SDTransfer Offloader{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-p+1vG0+owjT5y8k+9v8g4B+p1tXUJcN/h8H8L+Y9i7Q76fDwPjdFTOi45q6p0bz6N28+7+1IhPzf3c+3aw9P5Q=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      /* Basic styling for flash messages */
      .flash-messages {
        list-style: none;
        padding: 0;
        margin: 1em 0;
      }
      .flash-messages li {
        padding: 10px 15px;
        margin-bottom: 10px;
        border-radius: 4px;
        border: 1px solid transparent;
      }
      .flash-success { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
      .flash-error { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
      .flash-warning { background-color: #fff3cd; color: #856404; border-color: #ffeeba; }
      .flash-info { background-color: #d1ecf1; color: #0c5460; border-color: #bee5eb; }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <header class="navbar">
      <div class="navbar-title">
        <i class="fa fa-satellite-dish"></i> SDTransfer Offloader
      </div>
      <nav class="navbar-links">
        <a href="{{ url_for('index') }}"><i class="fa fa-home"></i> Dashboard</a>
        <a href="{{ url_for('wifi') }}"><i class="fa fa-wifi"></i> Wi‑Fi</a>
        <a href="{{ url_for('notifications') }}"><i class="fa fa-envelope"></i> Email</a>
        <a href="{{ url_for('logs') }}"><i class="fa fa-file-alt"></i> Logs</a>
        <a href="{{ url_for('diagnostics') }}"><i class="fa fa-tachometer-alt"></i> Diagnostics</a>
        <a href="{{ url_for('backup_config') }}"><i class="fa fa-save"></i> Backup</a>
        <a href="{{ url_for('update_system') }}"><i class="fa fa-sync-alt"></i> Update</a>
        <a href="{{ url_for('credentials') }}"><i class="fa fa-user-shield"></i> Credentials</a>
        <a href="{{ url_for('drive_auth') }}"><i class="fa fa-cloud"></i> Drive Auth</a>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <div class="container">
      {# Flash Messages Section #}
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flash-messages">
          {% for category, message in messages %}
            <li class="flash-{{ category }}">{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>

    <!-- FOOTER -->
    <footer class="footer">
      <p>© {{ now.year if now else 2025 }} SDTransfer Offloader</p> {# Add current year #}
    </footer>

     <script>
      // Simple script to make flash messages dismissable (optional)
      document.addEventListener('DOMContentLoaded', (event) => {
        const flashMessages = document.querySelectorAll('.flash-messages li');
        flashMessages.forEach(msg => {
          msg.addEventListener('click', () => {
            msg.style.opacity = '0';
            setTimeout(() => msg.remove(), 500); // Remove after fade out
          });
          msg.style.cursor = 'pointer';
          msg.style.transition = 'opacity 0.5s ease';
        });
      });
    </script>
  </body>
</html>